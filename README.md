# ðŸš€id-server

ä¸€ä¸ªåŸºäºŽ**Spring Authorization Server**çš„å¼€æºçš„æŽˆæƒæœåŠ¡å™¨ï¼Œæ¬¢è¿ŽStarã€‚
## ä¸»è¦åŠŸèƒ½
- åˆ›å»ºOAuth2å®¢æˆ·ç«¯ï¼Œå¹¶å¯¹OAuth2å®¢æˆ·ç«¯è¿›è¡Œç®¡ç†ã€‚
- UIæŽ§åˆ¶å°ï¼Œå¯åŠ¨æ€è°ƒæ•´ç®¡ç†å‘˜çš„ç”¨æˆ·è§’è‰²ã€‚
## ä¸»è¦æŠ€æœ¯
- Spring Boot
- Spring Security
- Spring Authorization Server
- Spring Data JPA
- H2 æ•°æ®åº“
- layui

## ç®€å•ç”¨æ³•

- æ‹‰å–ä¸»åˆ†æ”¯æœ€æ–°ä»£ç åˆ°æœ¬åœ°ã€‚
- é€šè¿‡`IdServerApplication`æ¥å¯åŠ¨æŽˆæƒæœåŠ¡å™¨ã€‚ç®¡ç†æŽ§åˆ¶å°æœ¬åœ°ç™»å½•è·¯å¾„ä¸º`http://localhost:9000/system/login`ï¼Œæœ€é«˜æƒé™ç”¨æˆ·ä¸º`root`ï¼Œå¯†ç ä¸º`idserver`ã€‚
- ä½ å¯ä»¥é€šè¿‡`root`ç”¨æˆ·åˆ›å»ºç®¡ç†å…¶å®ƒæŽ§åˆ¶å°ç®¡ç†å‘˜ç”¨æˆ·ï¼Œå¹¶èµ‹äºˆä»–ä»¬è§’è‰²ã€‚
## oauth2 æµ‹è¯•æ–¹æ³•
- åœ¨**Id Server**ä¸­åˆ›å»ºä¸€ä¸ªOAuth2å®¢æˆ·ç«¯ï¼Œè‡ªå·±è®°ä½å¯†ç ï¼Œå¯†ç åŠŸèƒ½è¿˜ä¸å¤Ÿå®Œå–„ã€‚
- æ ·ä¾‹å®¢æˆ·ç«¯åœ¨`samples`æ–‡ä»¶å¤¹ä¸‹ï¼Œæ ¹æ®åˆ›å»ºçš„OAuth2å®¢æˆ·ç«¯ä¿¡æ¯ä¿®æ”¹é…ç½®ï¼Œä¸»è¦æ˜¯`client-id`,`client-secret`,`client-authentication-method`,`scope`ï¼Œå…¶å®ƒé€‰é¡¹é™¤éžä½ æ¯”è¾ƒäº†è§£OAuth2ï¼Œå¦åˆ™å…ˆä¸è¦åŠ¨ï¼Œä¹Ÿå¯ä»¥é€šè¿‡issueå’¨è¯¢ã€‚
- è°ƒç”¨`redirect-uri`ï¼Œè¿›å…¥ç™»å½•é¡µï¼Œè¾“å…¥ç”¨æˆ·å`user`å’Œå¯†ç `user`å³å¯ã€‚
> `redirect-uri`å¿…é¡»åœ¨æŽˆæƒæœåŠ¡å™¨Id Serveræ³¨å†Œå®¢æˆ·ç«¯æ—¶å£°æ˜Žã€‚

## æ¦‚å¿µ
ä¸€äº›æ¦‚å¿µ
### OAuth2Client 

**å®¢æˆ·ç«¯**æŒ‡çš„æ˜¯**OAuth2 Client**ï¼Œä½†åˆä¸å•å•æ˜¯ä¸€ä¸ª**OAuth2 Client**ï¼Œè¿ž**id server**æœ¬èº«éƒ½æ˜¯ä¸€ä¸ª**å®¢æˆ·ç«¯**ã€‚

### `role`å’Œ`scope`çš„å…³ç³»

`role`å’Œ`scope`å…¶å®žæ˜¯ä¸€ä¸ªä¸œè¥¿ï¼Œåªä¸è¿‡é¢å‘çš„å¯¹è±¡ä¸ä¸€æ ·ã€‚`role`é’ˆå¯¹çš„æ˜¯èµ„æºæ‹¥æœ‰è€…ï¼ˆResource Ownerï¼‰ï¼Œè€Œ`scope`é’ˆå¯¹çš„æ˜¯**OAuth2å®¢æˆ·ç«¯**ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œ`ROLE_email`æ˜¯ç”¨æˆ·å…·æœ‰èŽ·å–ç”µå­é‚®ä»¶ä¿¡æ¯çš„æŽ¥å£è®¿é—®æƒé™ï¼Œ`SCOPE_email`æ˜¯æ‹¥æœ‰`ROLE_email`æƒé™çš„ç”¨æˆ·æŽˆæƒOAuth2å®¢æˆ·ç«¯è®¿é—®èŽ·å–ç”µå­é‚®ä»¶ä¿¡æ¯æŽ¥å£ï¼Œç”¨æˆ·å¦‚æžœæ²¡æœ‰è¿™ä¸ªæƒé™ï¼Œé‚£ä»–å‡­ä»€ä¹ˆæŽˆæƒå‘¢ï¼Ÿ
> æ‰€ä»¥ç»“è®ºå°±æ˜¯ï¼š `ROLE_email`=`SCOPE_email`=`email`ã€‚

