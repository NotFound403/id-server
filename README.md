# ðŸš€id-server

ä¸€ä¸ªåŸºäºŽ**Spring Authorization Server**çš„å¼€æºçš„æŽˆæƒæœåŠ¡å™¨ã€‚


## ç®€å•ç”¨æ³•

- åˆå§‹åŒ–æ•°æ®è„šæœ¬è‡ªè¡Œæ‰§è¡Œ`init.sql`ï¼Œè‡ªè¡Œä¿®æ”¹æ•°æ®åº“é“¾æŽ¥ã€‚
- ç®¡ç†åŽå°ç™»å½• `http://localhost:9000/system/login`ï¼Œé»˜è®¤ç®¡ç†ç”¨æˆ·`felord`ã€é»˜è®¤å¯†ç `123456`ã€‚
- ç›®å‰å®¢æˆ·ç«¯åŠŸèƒ½åˆæ­¥å®Œæˆï¼ŒæŽˆæƒç¡®è®¤é¡µé¢ï¼ˆæœªå®Œæˆï¼‰ï¼Œå› æ­¤å»ºç«‹å®¢æˆ·ç«¯æ—¶éœ€è¦å…³é—­æŽˆæƒç¡®è®¤é€‰é¡¹ã€‚
- è‡ªè¡Œå»ºç«‹ä¸€ä¸ªå®¢æˆ·ç«¯ï¼Œé€‰æ‹©`client_secret_basic`æˆ–è€…`client_secret_post`ï¼Œé™¤éžä½ çœ‹è¿‡æˆ‘çš„æ•™ç¨‹ï¼ŒçŸ¥é“å…¶å®ƒçš„æ€Žä¹ˆçŽ©ã€‚
- æŽˆæƒæµ‹è¯•è´¦å·å¯†ç åˆ†åˆ«ä¸º`user`å’Œ`user`ï¼Œæš‚æ—¶è¿™ä¸ªè¿˜æ²¡æœ‰å¯¹æŽ¥æ•°æ®åº“å…ˆå¼„ä¸ªä¸´æ—¶è´¦å·èƒ½è·‘é€šã€‚
- æžä¸€ä¸ªå®¢æˆ·ç«¯åº”ç”¨ï¼Œå‚è€ƒ [spring-security-oauth2-tutorial](https://gitee.com/felord/spring-security-oauth2-tutorial)ä¸­çš„å®¢æˆ·ç«¯åº”ç”¨ï¼Œé…ç½®æ”¹æˆè‡ªå·±åˆšåˆ›å»ºçš„å®¢æˆ·ç«¯ä¿¡æ¯ã€‚

## æ¦‚å¿µ
ä¸€äº›æ¦‚å¿µ
### OAuth2Client 

**å®¢æˆ·ç«¯**æŒ‡çš„æ˜¯**OAuth2 Client**ï¼Œä½†åˆä¸å•å•æ˜¯ä¸€ä¸ª**OAuth2 Client**ï¼Œè¿ž**id server**æœ¬èº«éƒ½æ˜¯ä¸€ä¸ª**å®¢æˆ·ç«¯**ã€‚
#### role

è§’è‰²å¿…é¡»ä¾é™„äºŽå®¢æˆ·ç«¯çš„å­˜åœ¨ï¼Œæœ¬é¡¹ç›®çš„æ ¹æœ¬å°±åœ¨äºŽç®¡ç†å®¢æˆ·ç«¯ï¼Œæ‰€ä»¥è§’è‰²å¿…é¡»æœ‰å®¢æˆ·ç«¯çš„å±žæ€§ï¼Œè¿™æ ·å’Œ**SCOPE**çš„è®¾è®¡æ‰æ˜¯ä¸€è‡´çš„ã€‚

> `role`å’Œ`scope`çš„å…³ç³»æ˜¯æ€Žæ ·çš„ï¼Ÿ

`role`å’Œ`scope`å…¶å®žæ˜¯ä¸€ä¸ªä¸œè¥¿ï¼Œåªä¸è¿‡é¢å‘çš„å¯¹è±¡ä¸ä¸€æ ·ã€‚`role`é’ˆå¯¹çš„æ˜¯èµ„æºæ‹¥æœ‰è€…ï¼ˆResource Ownerï¼‰ï¼Œè€Œ`scope`é’ˆå¯¹çš„æ˜¯**OAuth2å®¢æˆ·ç«¯**ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œ`ROLE_email`æ˜¯ç”¨æˆ·å…·æœ‰èŽ·å–ç”µå­é‚®ä»¶ä¿¡æ¯çš„æŽ¥å£è®¿é—®æƒé™ï¼Œ`SCOPE_email`æ˜¯æ‹¥æœ‰`ROLE_email`æƒé™çš„ç”¨æˆ·æŽˆæƒOAuth2å®¢æˆ·ç«¯è®¿é—®èŽ·å–ç”µå­é‚®ä»¶ä¿¡æ¯æŽ¥å£ï¼Œç”¨æˆ·å¦‚æžœæ²¡æœ‰è¿™ä¸ªæƒé™ï¼Œé‚£ä»–å‡­ä»€ä¹ˆæŽˆæƒå‘¢ï¼Ÿ
> æ‰€ä»¥ç»“è®ºå°±æ˜¯ï¼š `ROLE_email`=`SCOPE_email`=`email`ã€‚

